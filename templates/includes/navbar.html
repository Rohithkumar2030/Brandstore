{% load static %}

<div class="container-fluid text-center" style="background-color: rgba(83, 95, 158, 1); padding: 10px; font-weight: 600; position: sticky; top: 0; z-index: 999;">
  <a href="#" style="color: white; text-transform: uppercase; letter-spacing: 2px; font-size: 11px;">
    <span>&#x1F525</span> With all the collection close to hearts of all KGPians <span>&#x1F525</span>
  </a>
</div>

<header class="section-header">
  <section class="header-main border-bottom">
    <div class="container">

      <div class="d-flex d-md-none flex-column w-100 py-2">
        
        <div class="d-flex justify-content-between align-items-center w-100 mb-2">
          <a href="{% url 'home' %}" class="d-flex align-items-center text-decoration-none" style="gap: 5px;">
            <img src="{% static './images/logo.png' %}" alt="Logo" style="height: 32px;">
            <div class="d-flex flex-column">
              <span class="fw-bold" style="font-size: 12px; line-height: 1.1; color: #3E2D92;">IIT Kharagpur</span>
              <span style="font-size: 11px; line-height: 1.1; color: #3E2D92;">Brand Store</span>
            </div>
          </a>

          <div class="d-flex align-items-center" style="gap: 10px;">
            <div class="text-right d-flex flex-column" style="font-size: 11px; line-height: 1.2;">
              {% if user.id is not None %}
                <a href="{% url 'dashboard' %}" class="text-dark">Dashboard</a>
                <a href="{% url 'logout' %}" class="text-danger">Logout</a>
              {% else %}
                <a href="{% url 'login' %}" class="text-dark">Login</a>
                <a href="{% url 'register' %}" class="text-dark">Register</a>
              {% endif %}
            </div>
            <a href="{% url 'cart' %}" class="widget-header position-relative">
              <div class="icon icon-sm rounded-circle border d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                  <i class="fa fa-shopping-cart" style="font-size: 12px;"></i>
              </div>
              <span class="badge badge-pill badge-danger notify" style="position: absolute; top: -5px; right: -5px; font-size: 10px;">{{cart_count}}</span>
            </a>
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center w-100 mb-2">
          <div class="category-wrap dropdown">
            <button type="button" class="btn btn-primary dropdown-toggle btn-sm" data-toggle="dropdown" style="font-size: 12px; padding: 5px 10px;">
              <i class="fa fa-bars"></i> Category
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="{% url 'store' %}">All Products</a>
              {% for category in links %}
                <a class="dropdown-item" href="{{ category.get_url }}">{{ category.category_name }}</a>
              {% endfor %}
            </div>
          </div>
          <a href="{% url 'store' %}" class="btn btn-primary btn-sm px-4" style="font-size: 12px; padding: 5px 15px;">Store</a>
        </div>

        <div class="w-100">
          <form action="{% url 'search' %}" class="search" method='GET'>
            <div class="input-group input-group-sm w-100">
              <input type="text" class="form-control" placeholder="Search" name="keyword" required>
              <div class="input-group-append">
                <button class="btn btn-primary" type="submit"><i class="fa fa-search"></i></button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="d-none d-md-flex row align-items-center py-3">
        <div class="col-lg-2 col-md-3">
          <a href="{% url 'home' %}" class="d-flex align-items-center text-decoration-none" style="gap: 8px;">
            <img src="{% static './images/logo.png' %}" alt="IIT Kharagpur Logo" style="height: 42px;">
            <div class="d-flex flex-column justify-content-center">
              <span class="fw-bold" style="font-size: 15px; line-height: 1.2; color: #3E2D92;">IIT Kharagpur</span>
              <span style="font-size: 14px; line-height: 1.2; color: #3E2D92;">Brand Store</span>
            </div>
          </a>
        </div>

        <div class="col-md-auto d-flex">
          <div class="category-wrap dropdown d-inline-block">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-bars"></i> All category
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="{% url 'store' %}">All Products </a>
              {% for category in links %}
                <a class="dropdown-item" href="{{ category.get_url }}">{{ category.category_name }} </a>
              {% endfor %}
            </div>
          </div>
          <a href="{% url 'store' %}" class="btn btn-primary ml-2">Store</a>
        </div>

        <div class="col-lg col-md-6 mx-auto">
          <form action="{% url 'search' %}" class="search" method='GET'>
            <div class="input-group w-100">
                <input type="text" class="form-control" placeholder="Search" name="keyword" required>
                <div class="input-group-append">
                  <button class="btn btn-primary" type="submit"><i class="fa fa-search"></i></button>
                </div>
            </div>
          </form>
        </div>

        <div class="col-lg-3 col-md-auto">
          <div class="widgets-wrap d-flex justify-content-end align-items-center">
            <div class="widget-header text-right">
              <small class="title text-muted">{% if user.id is None %}Welcome guest!{% else %}Welcome {{user.first_name}}!{% endif %}</small>
              <div style="font-size: 14px;">
                {% if user.id is None %}
                  <a href="{% url 'login' %}">Sign in</a> | <a href="{% url 'register' %}">Register</a>
                {% else %}
                  <a href="{% url 'dashboard' %}">Dashboard</a> | <a href="{% url 'logout' %}">Logout</a>
                {% endif %}
              </div>
            </div>
            <a href="{% url 'cart' %}" class="widget-header pl-3 ml-3">
              <div class="icon icon-sm rounded-circle border"><i class="fa fa-shopping-cart"></i></div>
              <span class="badge badge-pill badge-danger notify">{{cart_count}}</span>
            </a>
          </div>
        </div>
      </div>
      </div> 
  </section>
</header>